
# Need to create this explicitly, since the VM will only create 'user' when it does firstboot
mkdir /home/user
mkdir /home/user/config

# This is a configuration script to run when first booted
# it makes use of /home/user/config/params the we will also be adding to on-the-fly for the VM to incorporate
upload vm-guest/firstboot.bash:/home/user/config/
upload vm-guest/params:/home/user/config/


# This is the requirements.txt to be installed into the python virtualenv
upload vm-guest/requirements.txt:/home/user/config/

# This is the (potentially empty) cache of the python env that we'll build (probably later)
copy-in vm-guest/cache/env:/home/user/


firstboot-command useradd --create-home --password "" user
firstboot-command cp -r /etc/skel/. /home/user
firstboot-command chown -R user:user /home/user
firstboot-command chmod 744 /home/user/config/firstboot.bash

firstboot-command su - user -c /home/user/config/firstboot.bash


# And here are some more scripts for the home directory
upload vm-guest/run-jupyter.bash:/home/user/
upload vm-guest/run-tensorboard.bash:/home/user/

# And the jupyter notebooks
copy-in notebooks:/home/user/

# And the pre-trained NN data ::
## TODO
