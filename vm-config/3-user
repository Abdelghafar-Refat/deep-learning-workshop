
# Need to create this explicitly, since the VM will only create 'user' when it does firstboot
mkdir /home/user

# This is a configuration script to run when first booted
# it makes use of /home/user/configure-vm.conf the we will also be adding to on-the-fly for the VM to incorporate
upload vm-guest/configure-vm.bash:/home/user/
upload vm-guest/configure-vm.conf:/home/user/


# This is the requirements.txt to be installed into the python virtualenv
upload vm-guest/requirements.txt:/home/user/

# This is the (potentially empty) cache of the python env that we'll build (probably later)
copy-in vm-guest/cache/env:/home/user/


firstboot-command useradd --create-home --password "" user
firstboot-command cp -r /etc/skel/. /home/user
firstboot-command chown -R user:user /home/user
firstboot-command chmod 744 /home/user/configure-vm.bash

#firstboot-command su - user -c /home/user/configure-vm.bash

